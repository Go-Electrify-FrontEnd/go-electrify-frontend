version: 2
review:
  # ğŸ§  General settings
  auto_review: true
  auto_comment: true
  require_approval: false

  # ğŸ“‹ File filters (which files to review)
  include:
    - "**/*.ts"
    - "**/*.tsx"
  exclude:
    - "node_modules/**"
    - ".next/**"
    - "dist/**"
    - "coverage/**"

rules:
  # ğŸš« 1. Enforce Server Component for pages
  - name: "Server Page Rule"
    description: "Ensure page.tsx files are server components only."
    applies_to: "page.tsx"
    severity: "error"
    checks:
      - pattern: '"use client"'
        message: "âŒ 'page.tsx' must be a Server Component (remove 'use client')."
      - not_pattern: '"use server"'
        message: "âš ï¸ Consider adding 'use server' at the top of 'page.tsx' for clarity."

  # âš™ï¸ 2. Disallow React hooks in page.tsx
  - name: "React Hook Restriction"
    description: "Server components cannot use React client hooks."
    applies_to: "page.tsx"
    severity: "error"
    checks:
      - pattern_any:
          - "useState("
          - "useEffect("
          - "useRef("
          - "useContext("
        message: "âŒ Hooks like useState/useEffect are not allowed in Server Components."

  # ğŸ–¼ï¸ 3. Image best practice
  - name: "No Inline Image Tags"
    description: "Use Next/Image for optimized image handling."
    severity: "warning"
    checks:
      - pattern: "<img src="
        message: "âš ï¸ Use `<Image>` from 'next/image' instead of raw <img> tags."

  # ğŸ§© 4. Import convention
  - name: "Absolute Imports Preferred"
    description: "Use absolute imports (from @/...) instead of long relative imports."
    severity: "info"
    checks:
      - pattern: '\.\./\.\./'
        message: "ğŸ’¡ Consider using absolute imports with `@/` alias instead of long relative paths."

style:
  tone: "friendly"
  length: "concise"
  detail_level: "balanced"
  emoji: true
  comment_mode: "grouped"

notifications:
  pr_comment: true
  pr_summary: true
  fail_on_violation: false
